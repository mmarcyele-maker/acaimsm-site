  <option value="retirada">Retirada grÃ¡tis</option>  
  <option value="jacira">Entrega Jardim Jacira (+R$4)</option>  
</select>  
<input id="enderecoCliente" placeholder="EndereÃ§o (se entrega)">  
<select id="pagamento">  
  <option value="">Forma de pagamento</option>  
  <option>Pix</option>  
  <option>Dinheiro</option>  
</select>  
<div id="pixInfo" style="display:none">  
  <b>Pix:</b> 11984550595<br>  
  <b>Nome:</b> Marcyele da Silva Maciel<br>  
  <label><input type="checkbox" id="confirmouPix"> Confirmei pagamento Pix</label>  
</div>  
<textarea id="obs" placeholder="ObservaÃ§Ãµes"></textarea>  
<div id="lista"></div>  
<div class="total" id="totalDiv">Total: R$ 0,00</div>  
<button onclick="finalizar()">Finalizar no WhatsApp</button>  
<br><br>  
<button onclick="fecharCarrinho()">Fechar</button>  
</div>  <!-- BotÃ£o Admin no final -->  <button id="adminBtn" onclick="abrirAdmin()">Admin</button>

<!-- ADMIN -->  <div id="adminBox">  
<h2>Painel Admin</h2>  
<div id="adminPedidos"></div>  
<div class="total" id="totalFaturado"></div>  
<button onclick="limparPedidos()">Limpar pedidos</button>  
<br><br>  
<button onclick="fecharAdmin()">Fechar</button>  
</div>  <div id="carrinhoIcon" onclick="abrirCarrinho()">ðŸ›’ <span id="contador">0</span></div>  <script>  
let carrinho=[], total=0, taxaEntrega=0, pedidosSalvos=[];  
  
function alterarQtd(btn,v){  
  let s=btn.parentElement.querySelector(".qtd");  
  s.innerText=Math.max(0,parseInt(s.innerText)+v);  
}  
  
function adicionarCarrinho(btn){  
  let card=btn.closest(".card");  
  let nome=card.dataset.nome;  
  let preco=+card.dataset.preco;  
  let qtd=+card.querySelector(".card-info .qtd").innerText;  
  if(!qtd) return;  
  
  let adicionais=[], sub=qtd*preco;  
  card.querySelectorAll(".adicional").forEach(a=>{  
    let q=+a.querySelector(".qtd").innerText;  
    let p=+a.dataset.preco;  
    if(q){  
      let valor=q*p;  
      sub+=valor;  
      adicionais.push(`${a.dataset.nome} R$${p.toFixed(2)} x${q} = R$${valor.toFixed(2)}`);  
      a.querySelector(".qtd").innerText=0;  
    }  
  });  
  
  carrinho.push({nome,qtd,adicionais,sub});  
  total+=sub;  
  card.querySelector(".card-info .qtd").innerText=1;  
  atualizarCarrinho();  
}  
  
function atualizarCarrinho(){  
  let lista=document.getElementById("lista");  
  lista.innerHTML="";  
  let itens=0;  
  carrinho.forEach(i=>{  
    itens+=i.qtd;  
    lista.innerHTML+=`<div class="item-carrinho"><b>${i.nome} x${i.qtd}</b><br>${i.adicionais.length?"âž• "+i.adicionais.join("<br>"):""}<br>Subtotal: R$ ${i.sub.toFixed(2)}</div>`;  
  });  
  document.getElementById("contador").innerText=itens;  
  document.getElementById("totalDiv").innerText="Total: R$ "+(total+taxaEntrega).toFixed(2);  
}  
  
function abrirCarrinho(){ atualizarCarrinho(); document.getElementById("carrinhoBox").classList.add("ativo"); }  
function fecharCarrinho(){ document.getElementById("carrinhoBox").classList.remove("ativo"); }  
  
document.getElementById("tipoEntrega").onchange=e=>{ taxaEntrega=e.target.value==="jacira"?4:0; atualizarCarrinho(); }  
document.getElementById("pagamento").onchange=()=>{ document.getElementById("pixInfo").style.display=pagamento.value==="Pix"?"block":"none"; }  
  
function finalizar(){  
  if(!nomeCliente.value||!tipoEntrega.value||!pagamento.value){alert("Preencha os dados obrigatÃ³rios"); return;}  
  if(pagamento.value==="Pix"&&!confirmouPix.checked){alert("Confirme o pagamento Pix"); return;}  
  
  let pedido={nome:nomeCliente.value,tipoEntrega:tipoEntrega.value,endereco:enderecoCliente.value,pagamento:pagamento.value,obs:obs.value,itens:carrinho.slice(),taxaEntrega:taxaEntrega,total:total+taxaEntrega};  
  pedidosSalvos.push(pedido);  
  localStorage.setItem("pedidosSalvos",JSON.stringify(pedidosSalvos));  
  
  let msg=`ðŸ§ Pedido AÃ§aÃ­ MSM\nCliente: ${nomeCliente.value}\n`;  
  msg+=tipoEntrega.value==="retirada"?`ðŸ“ Retirada: Rua Ã‰rico VerÃ­ssimo 159\n`:`ðŸšš Entrega Jardim Jacira (+R$4)\n`;  
  msg+="\nðŸ§¾ Itens:\n";  
  carrinho.forEach(i=>{  
    msg+=`â€¢ ${i.nome} x${i.qtd} â€“ R$ ${i.sub.toFixed(2)}\n`;  
    if(i.adicionais.length) msg+=`  âž• ${i.adicionais.join("\n")}\n`;  
  });  
  if(obs.value) msg+="\nObs: "+obs.value;  
  if(pagamento.value==="Pix") msg+="\nEnvie o comprovante do Pix";  
  
  msg+=`\nðŸ’³ Pagamento: ${pagamento.value}`;  
  msg+=`\nðŸ’° Total: R$ ${(total+taxaEntrega).toFixed(2)}`;  
  
  carrinho=[]; total=0; atualizarCarrinho();  
  window.open("https://wa.me/5511943818352?text="+encodeURIComponent(msg));  
}  
  
// ADMIN  
const senhaAdmin = "msm2026";  
function abrirAdmin(){  
  let s = prompt("Digite a senha do Admin:");  
  if(s!==senhaAdmin){alert("Senha incorreta"); return;}  
  pedidosSalvos=JSON.parse(localStorage.getItem("pedidosSalvos"))||[];  
  let html="", totalF=0;  
  pedidosSalvos.forEach(p=>{  
    html+=`<div style="border-bottom:1px solid #ccc;padding:5px"><b>${p.nome}</b> (${p.pagamento})<br>`;  
    html+=`Entrega: ${p.tipoEntrega==="retirada"?"Retirada":"Jardim Jacira"}<br>`;  
    p.itens.forEach(it=>{ html+=`â€¢ ${it.nome} x${it.qtd} ${it.adicionais.length?"âž• "+it.adicionais.join(","):""} â€“ R$ ${it.sub.toFixed(2)}<br>` });  
    html+=`Taxa: R$ ${p.taxaEntrega}<br>`;  
    html+=`Total: R$ ${p.total.toFixed(2)}<br></div>`;  
    totalF+=p.total;  
  });  
  document.getElementById("adminPedidos").innerHTML=html;  
  document.getElementById("totalFaturado").innerText="Total faturado: R$ "+totalF.toFixed(2);  
  document.getElementById("adminBox").classList.add("ativo");  
}  
function fecharAdmin(){ document.getElementById("adminBox").classList.remove("ativo"); }  
function limparPedidos(){ if(confirm("Limpar todos os pedidos?")){localStorage.removeItem("pedidosSalvos"); pedidosSalvos=[]; abrirAdmin(); } }  
  
</script>  </body>  
</html>
