<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A√ßa√≠ Batido MSM</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#f2f2f2}
header{background:linear-gradient(90deg,#6a00ff,#a100ff);color:#fff;padding:18px;text-align:center;font-size:22px;font-weight:bold}
.container{padding:15px}
.card{background:#fff;border-radius:15px;padding:15px;margin-bottom:20px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
.card-conteudo{display:flex;gap:12px;align-items:center}
.card-conteudo img{width:120px;height:120px;object-fit:contain;border-radius:12px;border:2px solid #6a00ff}
.card-info{flex:1}
.preco{color:#6a00ff;font-weight:bold;font-size:18px}
.quantidade{display:flex;align-items:center;gap:10px;margin:8px 0}
.quantidade button{width:32px;height:32px;border:none;border-radius:50%;background:#6a00ff;color:#fff;font-size:18px;cursor:pointer}
.adicional{display:flex;justify-content:space-between;align-items:center;margin:6px 0}
.botao-add{background:linear-gradient(90deg,#6a00ff,#a100ff);color:#fff;border:none;padding:12px;width:100%;border-radius:10px;font-size:15px;cursor:pointer;margin-top:10px}

#carrinhoIcon{position:fixed;bottom:20px;right:20px;background:#6a00ff;color:#fff;padding:15px;border-radius:50px;cursor:pointer;z-index:1000}
#contador{background:red;border-radius:50%;padding:3px 7px;font-size:12px;margin-left:5px}
#carrinhoBox,#adminBox{position:fixed;right:-100%;top:0;width:90%;height:100%;background:#fff;transition:.4s;padding:20px;overflow:auto;z-index:999}
#carrinhoBox.ativo,#adminBox.ativo{right:0}
.item-carrinho{border-bottom:1px solid #ddd;padding:8px 0}
.total{font-weight:bold;font-size:18px;margin-top:10px}
input,select,textarea{width:100%;padding:10px;margin:6px 0 12px;border-radius:8px;border:1px solid #ccc}
textarea{resize:none}
button{cursor:pointer}
#adminBtn{display:block;margin:30px auto;padding:10px 15px;background:#6a00ff;color:#fff;border-radius:10px;width:200px;text-align:center;}
</style>
</head>

<body>

<header>
  <img src="banner-acai.jpg" alt="A√ßa√≠ Batido MSM" style="width:100%; display:block;">
</header>

<div class="container">

<!-- PRODUTOS -->
<div class="card" data-nome="A√ßa√≠ 300ml" data-preco="14">
  <div class="card-conteudo">
    <img src="1770533878737.png">
    <div class="card-info">
      <h3>300ml</h3>
      <div class="preco">R$ 14,00</div>
      <div class="quantidade">
        <button onclick="alterarQtd(this,-1)">‚àí</button>
        <span class="qtd">1</span>
        <button onclick="alterarQtd(this,1)">+</button>
      </div>
    </div>
  </div>
  <h4>Adicionais</h4>
  <div class="adicional" data-nome="Pa√ßoca" data-preco="2">
    <span>Pa√ßoca R$2,00</span>
    <div class="quantidade">
      <button onclick="alterarQtd(this,-1)">‚àí</button><span class="qtd">0</span><button onclick="alterarQtd(this,1)">+</button>
    </div>
  </div>
  <div class="adicional" data-nome="Leite em p√≥" data-preco="2">
    <span>Leite em p√≥ R$2,00</span>
    <div class="quantidade">
      <button onclick="alterarQtd(this,-1)">‚àí</button><span class="qtd">0</span><button onclick="alterarQtd(this,1)">+</button>
    </div>
  </div>
  <div class="adicional" data-nome="Leite condensado" data-preco="2">
    <span>Leite condensado R$2,00</span>
    <div class="quantidade">
      <button onclick="alterarQtd(this,-1)">‚àí</button><span class="qtd">0</span><button onclick="alterarQtd(this,1)">+</button>
    </div>
  </div>
  <button class="botao-add" onclick="adicionarCarrinho(this)">Adicionar</button>
</div>

<div class="card" data-nome="A√ßa√≠ 500ml" data-preco="18">
  <div class="card-conteudo">
    <img src="1770533878737.png">
    <div class="card-info">
      <h3>500ml</h3>
      <div class="preco">R$ 18,00</div>
      <div class="quantidade">
        <button onclick="alterarQtd(this,-1)">‚àí</button>
        <span class="qtd">1</span>
        <button onclick="alterarQtd(this,1)">+</button>
      </div>
    </div>
  </div>
  <h4>Adicionais</h4>
  <div class="adicional" data-nome="Pa√ßoca" data-preco="2">
    <span>Pa√ßoca R$2,00</span>
    <div class="quantidade">
      <button onclick="alterarQtd(this,-1)">‚àí</button><span class="qtd">0</span><button onclick="alterarQtd(this,1)">+</button>
    </div>
  </div>
  <div class="adicional" data-nome="Leite em p√≥" data-preco="2">
    <span>Leite em p√≥ R$2,00</span>
    <div class="quantidade">
      <button onclick="alterarQtd(this,-1)">‚àí</button><span class="qtd">0</span><button onclick="alterarQtd(this,1)">+</button>
    </div>
  </div>
  <div class="adicional" data-nome="Leite condensado" data-preco="2">
    <span>Leite condensado R$2,00</span>
    <div class="quantidade">
      <button onclick="alterarQtd(this,-1)">‚àí</button><span class="qtd">0</span><button onclick="alterarQtd(this,1)">+</button>
    </div>
  </div>
  <button class="botao-add" onclick="adicionarCarrinho(this)">Adicionar</button>
</div>

</div>

<!-- CARRINHO -->
<div id="carrinhoBox">
<h2>Seu Pedido</h2>
<input id="nomeCliente" placeholder="Nome">
<select id="tipoEntrega">
  <option value="">Forma de entrega</option>
  <option value="retirada">Retirada gr√°tis</option>
  <option value="jacira">Entrega Jardim Jacira (+R$4)</option>
</select>
<input id="enderecoCliente" placeholder="Endere√ßo (se entrega)">
<select id="pagamento">
  <option value="">Forma de pagamento</option>
  <option>Pix</option>
  <option>Dinheiro</option>
</select>
  <div id="pagamentoDinheiro" style="display:none;">



  <label>Precisa de troco?</label>
  <select id="precisaTroco">
    <option value="nao">N√£o</option>
    <option value="sim">Sim</option>
  </select>

  <div id="campoTroco" style="display:none;">
    <label>Troco para quanto? (R$)</label>
    <input
      type="number"
      id="trocoPara"
      placeholder="Ex: 100"
      step="0.01"
    >
    <p id="resultadoTroco"></p>
  </div>

  </div>
<div id="pixInfo" style="display:none">
  <b>Pix:</b> 11984550595<br>
  <b>Nome:</b> Marcyele da Silva Maciel<br>
  <label><input type="checkbox" id="confirmouPix"> Confirmei pagamento Pix</label>
</div>
<textarea id="obs" placeholder="Observa√ß√µes"></textarea>
<div id="lista"></div>
<div class="total" id="totalDiv">Total: R$ 0,00</div>
<button onclick="finalizar()">Finalizar no WhatsApp</button>
<br><br>
<button onclick="fecharCarrinho()">Fechar</button>
</div>

<!-- Bot√£o Admin no final -->
<button id="adminBtn" onclick="abrirAdmin()">Admin</button>

<!-- ADMIN -->
<div id="adminBox">
<h2>Painel Admin</h2>
<div id="adminPedidos"></div>
<div class="total" id="totalFaturado"></div>
<button onclick="limparPedidos()">Limpar pedidos</button>
<br><br>
<button onclick="fecharAdmin()">Fechar</button>
</div>

<div id="carrinhoIcon" onclick="abrirCarrinho()">üõí <span id="contador">0</span></div>

<script>
let carrinho=[], total=0, taxaEntrega=0, pedidosSalvos=[];

function alterarQtd(btn,v){
  let s=btn.parentElement.querySelector(".qtd");
  s.innerText=Math.max(0,parseInt(s.innerText)+v);
}

function adicionarCarrinho(btn){
  let card=btn.closest(".card");
  let nome=card.dataset.nome;
  let preco=+card.dataset.preco;
  let qtd=+card.querySelector(".card-info .qtd").innerText;
  if(!qtd) return;

  let adicionais=[], sub=qtd*preco;
  card.querySelectorAll(".adicional").forEach(a=>{
    let q=+a.querySelector(".qtd").innerText;
    let p=+a.dataset.preco;
    if(q){
      let valor=q*p;
      sub+=valor;
      adicionais.push(`${a.dataset.nome} R$${p.toFixed(2)} x${q} = R$${valor.toFixed(2)}`);
      a.querySelector(".qtd").innerText=0;
    }
  });

  carrinho.push({nome,qtd,adicionais,sub});
  total+=sub;
  card.querySelector(".card-info .qtd").innerText=1;
  atualizarCarrinho();
}

function atualizarCarrinho(){
  let lista = document.getElementById("lista");
  lista.innerHTML = "";
  let itens = 0;

  carrinho.forEach((i, index)=>{
    itens += i.qtd;

    let adicionaisHtml = "";
    i.adicionais.forEach((a, aIndex)=>{
      adicionaisHtml += `
        <div>
          ‚ûï ${a}
          <button onclick="removerAdicional(${index}, ${aIndex})">‚ùå</button>
        </div>
      `;
    });

    lista.innerHTML += `
      <div class="item-carrinho">
        <b>${i.nome} x${i.qtd}</b>
        <button onclick="removerItem(${index})" style="float:right">üóëÔ∏è</button>
        <br>
        ${adicionaisHtml}
        <br>
        Subtotal: R$ ${i.sub.toFixed(2)}
      </div>
    `;
  });

  document.getElementById("contador").innerText = itens;
  document.getElementById("totalDiv").innerText =
    "Total: R$ " + (total + taxaEntrega).toFixed(2);
  }
  function removerItem(index){
  total -= carrinho[index].sub;
  carrinho.splice(index, 1);
  atualizarCarrinho();
}

function removerAdicional(indexItem, indexAdicional){
  let item = carrinho[indexItem];

  let texto = item.adicionais[indexAdicional];
  let valor = parseFloat(texto.match(/R\$([\d.]+)/)[1]);

  item.sub -= valor;
  total -= valor;

  item.adicionais.splice(indexAdicional, 1);

  atualizarCarrinho();
  }

function abrirCarrinho(){ atualizarCarrinho(); document.getElementById("carrinhoBox").classList.add("ativo"); }
function fecharCarrinho(){ document.getElementById("carrinhoBox").classList.remove("ativo"); }

document.getElementById("tipoEntrega").onchange=e=>{ taxaEntrega=e.target.value==="jacira"?4:0; atualizarCarrinho(); }
document.getElementById("pagamento").onchange=()=>{ document.getElementById("pixInfo").style.display=pagamento.value==="Pix"?"block":"none"; }

function finalizar(){
  if(!nomeCliente.value||!tipoEntrega.value||!pagamento.value){alert("Preencha os dados obrigat√≥rios"); return;}
  if(pagamento.value==="Pix"&&!confirmouPix.checked){alert("Confirme o pagamento Pix"); return;}

  let pedido={nome:nomeCliente.value,tipoEntrega:tipoEntrega.value,endereco:enderecoCliente.value,pagamento:pagamento.value,obs:obs.value,itens:carrinho.slice(),taxaEntrega:taxaEntrega,total:total+taxaEntrega};
  pedidosSalvos.push(pedido);
  localStorage.setItem("pedidosSalvos",JSON.stringify(pedidosSalvos));

  let msg=`üçß Pedido A√ßa√≠ MSM\nCliente: ${nomeCliente.value}\n`;
  if (tipoEntrega.value === "retirada") {
  msg += `üìç Retirada: Rua √ârico Ver√≠ssimo 159\n`;
} else {
  msg += `üöö Entrega Jardim Jacira (+R$4)\n`;
  msg += `üìç Endere√ßo: ${enderecoCliente.value}\n`;
}
  carrinho.forEach(i=>{
    msg+=`‚Ä¢ ${i.nome} x${i.qtd} ‚Äì R$ ${i.sub.toFixed(2)}\n`;
    if(i.adicionais.length) msg+=`  ‚ûï ${i.adicionais.join("\n")}\n`;
  });
  if(obs.value) msg+="\nObs: "+obs.value;
  if(pagamento.value==="Pix") msg+="\nEnvie o comprovante do Pix";

  msg+=`\nüí≥ Pagamento: ${pagamento.value}`;
  msg+=`\nüí∞ Total: R$ ${(total+taxaEntrega).toFixed(2)}`;

  carrinho=[]; total=0; atualizarCarrinho();
  window.open("https://wa.me/5511943818352?text="+encodeURIComponent(msg));
}

// ADMIN
const senhaAdmin = "msm2026";
function abrirAdmin(){
  let s = prompt("Digite a senha do Admin:");
  if(s!==senhaAdmin){alert("Senha incorreta"); return;}
  pedidosSalvos=JSON.parse(localStorage.getItem("pedidosSalvos"))||[];
  let html="", totalF=0;
  pedidosSalvos.forEach(p=>{
    html+=`<div style="border-bottom:1px solid #ccc;padding:5px"><b>${p.nome}</b> (${p.pagamento})<br>`;
    html+=`Entrega: ${p.tipoEntrega==="retirada"?"Retirada":"Jardim Jacira"}<br>`;
    p.itens.forEach(it=>{ html+=`‚Ä¢ ${it.nome} x${it.qtd} ${it.adicionais.length?"‚ûï "+it.adicionais.join(","):""} ‚Äì R$ ${it.sub.toFixed(2)}<br>` });
    html+=`Taxa: R$ ${p.taxaEntrega}<br>`;
    html+=`Total: R$ ${p.total.toFixed(2)}<br></div>`;
    totalF+=p.total;
  });
  document.getElementById("adminPedidos").innerHTML=html;
  document.getElementById("totalFaturado").innerText="Total faturado: R$ "+totalF.toFixed(2);
  document.getElementById("adminBox").classList.add("ativo");
}
function fecharAdmin(){ document.getElementById("adminBox").classList.remove("ativo"); }
function limparPedidos(){ if(confirm("Limpar todos os pedidos?")){localStorage.removeItem("pedidosSalvos"); pedidosSalvos=[]; abrirAdmin(); } }
  
  
const pagamento = document.getElementById("pagamento");
const pagamentoDinheiro = document.getElementById("pagamentoDinheiro");

if (pagamento && pagamentoDinheiro) {
  pagamento.addEventListener("change", () => {
    pagamentoDinheiro.style.display =
      pagamento.value === "Dinheiro" ? "block" : "none";
  });
}

const precisaTroco = document.getElementById("precisaTroco");
const campoTroco = document.getElementById("campoTroco");

if (precisaTroco && campoTroco) {
  precisaTroco.addEventListener("change", () => {
    campoTroco.style.display =
      precisaTroco.value === "sim" ? "block" : "none";
  });
}

const trocoPara = document.getElementById("trocoPara");
const resultadoTroco = document.getElementById("resultadoTroco");
const totalDiv = document.getElementById("totalDiv");

if (trocoPara && resultadoTroco && totalDiv) {
  trocoPara.addEventListener("input", () => {
    const totalTexto = totalDiv.innerText;
    const total = parseFloat(
      totalTexto.replace("Total: R$", "").replace(",", ".")
    );

    const valorTrocoPara = parseFloat(trocoPara.value);

    if (!valorTrocoPara || valorTrocoPara < total) {
      resultadoTroco.innerText = "‚ö†Ô∏è Valor insuficiente para troco";
      return;
    }

    const troco = valorTrocoPara - total;
    resultadoTroco.innerText = `Troco: R$ ${troco.toFixed(2)}`;
  });
  }
  </script>
</body>
</html>
